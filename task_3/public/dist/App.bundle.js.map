{"version":3,"sources":["webpack:///webpack/bootstrap b9bd62792414aa7abff9","webpack:///./public/scripts/getRecomendation.js","webpack:///./public/scripts/calendar.js","webpack:///./public/scripts/helpers.js","webpack:///./public/scss/main.scss?3d8a","webpack:///./public/scripts/app.js"],"names":["getRecommendation","date","members","db","floors","rooms","JSON","parse","stringify","startEventDate","Date","start","needDate","getUTCFullYear","getUTCMonth","getUTCDate","needDateTrigerStart","getTime","needDateTrigerEnd","events","filter","event","forEach","indexOf","room","floor","push","map","floorNumber","count","Math","abs","member","parseInt","sort","a","b","allRecommendation","recommendedRooms","capacity","length","copyEvents","eventsInRoom","id","dateValid","eventInRoom","dateStartValid","end","dateEndValid","concat","console","log","roomsWithEvents","result","swap","slice","firstCondition","secondCondition","thirdCondition","enableTransfer","Array","isArray","duplicate","item","eventMain","roomEvent","allSwaps","floorEvent","sortSwapsByFloor","swaps","String","resultMassive","floorSwaps","trigger","element","timeDiff","endTime","setUTCHours","setUTCMinutes","eventsWithNewTime","eventsAfterStart","newDate","eventAfterStart","validEvent","eventValidation","valueOf","recommendation","toISOString","calendar","year","month","Dlast","getDate","D","DNlast","getFullYear","getMonth","getDay","DNfirst","i","document","querySelector","innerHTML","dataset","querySelectorAll","$","onclick","parseFloat","timeLines","lastScrollLeft","scrollLeft","calendarElem","each","elem","text","getLetterMonthRu","window","scroll","addClass","css","scrollTop","position","transform","on","toggleClass","target","width","innerWidth","offset","left","widthElem","meetingInfoWidth","find","needOffset","rightTrigger","leftTrigger","cornerOffset","focus","fadeIn","focusout","fadeOut","regExp","test","navigator","userAgent","getLetterMonthShortRu","login","data","removeClass","checked","validationDateAndSendQuery","parents","keyup","val","filterTarget","hide","show","jQuery","expr","Contains","m","toLowerCase","ready","blockInputData","datepicker","keydown","e","preventDefault","inputDate","dateInInput","resultString","timepicker","timeFormat","interval","minTime","maxTime","defaultTime","startTime","dynamic","dropdown","scrollbar","shortDateValue","remove","stopTime","startTimeValid","validationTimeRule","stopTimeValid","split","starTimeCount","stopTimeCount","timeStart","getCorrectTimeFormat","timeEnd","box","memberListElement","avatar","attr","query","then","html","location","href","recommend","roomData","blockRecommendation","append","getUTCHours","getUTCMinutes","title","selectOffer","time","stopPropagation","targetElement","parent","queryUsers","queryRooms","queryEvents","users","request","persons","user","homeFloor","avatarUrl","dateStart","dateEnd","Promise","resolve","reject","xhr","XMLHttpRequest","responseType","onreadystatechange","readyState","status","response","ontimeout","open","setRequestHeader","send","dateParts","timeParts","numberMonth","UTC"],"mappings":"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","file":"App.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b9bd62792414aa7abff9","export function getRecommendation(date, members, db) {\n  \n  // sort rooms by floors\n  let floors = [];\n  let rooms = JSON.parse(JSON.stringify(db.rooms));\n  let startEventDate = Date.parse(date.start);\n  startEventDate = new Date(startEventDate);\n  let needDate = new Date(\n    startEventDate.getUTCFullYear(),\n    startEventDate.getUTCMonth(),\n    startEventDate.getUTCDate()\n    );\n  let needDateTrigerStart = needDate.getTime();\n  let needDateTrigerEnd = needDate.getTime() + 86400000;\n  // фильтруем по дате\n  db.events = db.events.filter(event => needDateTrigerStart < Date.parse(event.date.start) < needDateTrigerEnd);\n  rooms.forEach( room => {\n    if(floors.indexOf(room.floor) === -1) {\n      floors.push(room.floor);\n    }\n  });\n  floors = floors.map( floor => {\n    return { floorNumber: floor}\n  });\n  // надем сумму этажей пройдееную всеми участниками для каждого этажа\n  floors.forEach( floor => {\n    let floorNumber = floor.floorNumber;\n    floor.count = 0; // init count\n\n    members.forEach(member => {\n      floor.count += Math.abs((member.floor - parseInt(floorNumber, 10)));\n    });\n  });\n  // // сортируем по меньшему числу пройденных этажей\n  floors.sort((a, b) => a.count - b.count);\n  // // ищем подходящие комнаты на этом этаже\n  let allRecommendation = [];\n  floors.forEach( floor => {\n    let recommendedRooms = rooms.filter( room => room.floor === floor.floorNumber);\n    // фильтрровка и сортировка по вместимости\n    recommendedRooms = recommendedRooms.filter(room => room.capacity >= members.length);\n    recommendedRooms.sort((a, b) => a.capacity - b.capacity);\n    floor.rooms = JSON.parse(JSON.stringify(recommendedRooms));\n    // проверка по времени\n    let copyEvents = JSON.parse(JSON.stringify(db.events));\n    recommendedRooms.forEach( room => {\n      let eventsInRoom = copyEvents.filter(event => event.room === parseInt(room.id, 10));\n      room.dateValid = true;\n      room.events = eventsInRoom;\n      \n      // validation date\n      eventsInRoom.forEach((eventInRoom) => {\n        let dateStartValid = Date.parse(date.start) >= Date.parse(eventInRoom.date.end);\n        let dateEndValid = Date.parse(date.end) <= Date.parse(eventInRoom.date.start);\n        if(!(dateEndValid || dateStartValid)) {\n          room.dateValid = false;\n        }\n      });\n    });\n    allRecommendation = allRecommendation.concat(recommendedRooms);\n  });\n  console.log(allRecommendation)\n  //копируем для будующих операций\n  let roomsWithEvents = JSON.parse(JSON.stringify(rooms));\n  // set recommended rooms id\n  \n  allRecommendation = allRecommendation.filter(room => room.dateValid);\n  if (allRecommendation.length !== 0) {\n    let result = [];\n    allRecommendation.forEach((room) => {\n      result.push({\n        date: {\n          start: date.start,\n          end: date.end\n        },\n        room: room.id,\n        swap: []\n      });\n    });\n    return result;\n  } else {\n    // find all event in this period\n    let copyEvents = db.events.slice();\n    copyEvents = copyEvents.filter( event => {\n      let firstCondition = Date.parse(event.date.end) > Date.parse(date.start) && Date.parse(date.end) > Date.parse(event.date.start);\n  \n      let secondCondition = Date.parse(date.start) <= Date.parse(event.date.start) && Date.parse(date.end) >= Date.parse(event.date.end);\n  \n      let thirdCondition = Date.parse(date.start) >= Date.parse(event.date.start) && Date.parse(date.end) <= Date.parse(event.date.end);\n      return (firstCondition || secondCondition || thirdCondition);\n    });\n    // проходимся по всем пересекающимся с нужным времем event'ам\n    copyEvents.forEach( event => {\n      // берем комнаты и проходимся по всем ивентам в комнатах\n      rooms.forEach( room => {\n        if(parseInt(room.id, 10) !== event.room) {\n          let enableTransfer = true;\n          room.events.forEach( eventInRoom => {\n            // смотрим можно ли в эту комнату перенести переговорку\n            let firstCondition = Date.parse(eventInRoom.date.end) > Date.parse(event.date.start) && Date.parse(event.date.end) > Date.parse(eventInRoom.date.start);\n            \n            let secondCondition = Date.parse(event.date.start) <= Date.parse(eventInRoom.date.start) && Date.parse(event.date.end) >= Date.parse(eventInRoom.date.end);\n            \n            let thirdCondition = Date.parse(event.date.start) >= Date.parse(eventInRoom.date.start) && Date.parse(event.date.end) <= Date.parse(eventInRoom.date.end);\n            let dateValid = firstCondition || secondCondition || thirdCondition;\n            \n            // прошли ли все проверки по совместимости\n            if(dateValid) {\n              enableTransfer = false;\n            }\n          });\n          // если все мероприятия прошли проверку совместимости то его можно перенести\n          if (enableTransfer) {\n            if (Array.isArray(room.swap)){\n              let duplicate = room.swap.filter(item => item.eventMain === event.id);\n              if (duplicate.length === 0) {\n                room.swap.push({\n                  event: event.id,\n                  room: room.id,\n                  roomEvent: event.room\n                });\n              }\n            } else {\n              room.swap = [{\n                event: event.id,\n                room: room.id,\n                roomEvent: event.room\n              }]\n            }\n          }\n        }\n      })\n    });\n    let result = [];\n    let allSwaps = [];\n    // создвем мвссив для ответа\n    rooms.forEach(room => {\n      if (room.swap != null) {\n        allSwaps = allSwaps.concat(room.swap);\n      }\n    });\n    // return allSwaps\n    allSwaps.forEach( swap => {\n      let room = db.rooms.filter(room => parseInt(swap.roomEvent, 10) === parseInt(room.id, 10));\n      // console.log(room);\n      if(room[0] != null) {\n        swap.floorEvent = room[0].floor;\n      }\n    });\n    \n    let sortSwapsByFloor = [];\n    // сортировка комнат по наименьшему количеству пройденных этажей\n    floors.forEach(floor => {\n      let swaps = allSwaps.filter(swap => {\n        return String(floor.floorNumber) === String(swap.floorEvent)\n      });\n    // соединяем возможные переносы по комнатам которые освободятся\n      sortSwapsByFloor.push(swaps);\n    });\n    // сортируем по освобождающимяся комнатам\n    let resultMassive = [];\n    sortSwapsByFloor.forEach( floorSwaps => {\n      floorSwaps.sort( (a, b) => a.roomEvent - b.roomEvent);\n      let trigger = null;\n      floorSwaps.forEach( swap => {\n        if(swap.roomEvent !== trigger) {\n          trigger = swap.roomEvent;\n          resultMassive.push([swap])\n        } else {\n          resultMassive[resultMassive.length - 1].push(swap);\n        }\n      })\n    });\n    \n    // создаем требуемый формат ответа\n    resultMassive.forEach((swaps) => {\n      result.push({\n        date: {\n          start: date.start,\n          end: date.end\n        },\n        room: swaps[0].roomEvent,\n        swap: swaps.map( element => {\n          return { event: element.event, room: element.room }\n        })\n      });\n    });\n    if (result.length !== 0) {\n      return result\n    } else {\n      // блок подбора времни по времени освобождения переговоро\n      let timeDiff = Date.parse(date.end) - Date.parse(date.start);\n      let endTime = new Date(Date.parse(date.start));\n      endTime.setUTCHours(23);\n      endTime.setUTCMinutes(0);\n      let eventsWithNewTime = [];\n      roomsWithEvents.forEach( room => {\n        let events = room.events;\n        let eventsAfterStart = events.filter(event => Date.parse(event.date.end) > Date.parse(date.start));\n        eventsAfterStart.forEach( eventAfterStart => {\n          let newDate  = {\n            start: Date.parse(eventAfterStart.date.end),\n            end: (Date.parse(eventAfterStart.date.end) + timeDiff),\n            room: eventAfterStart.room,\n            validEvent: false\n          };\n          events.forEach( eventValidation => {\n            console.log(eventValidation);\n            let dateStartValid = newDate.start >= Date.parse(eventValidation.date.end);\n            let dateEndValid = newDate.end <= Date.parse(eventValidation.date.start);\n            if((dateEndValid || dateStartValid) && newDate.end < endTime.valueOf()) {\n              newDate.dateValid = true;\n            }\n          });\n          eventsWithNewTime.push(newDate);\n        })\n      });\n      // фильтр по ближайшей освободившейся переговрке\n      eventsWithNewTime.sort((a, b) => a.start - b.start);\n      let recommendation = [];\n      eventsWithNewTime.forEach( event => {\n        recommendation.push({\n          date: {\n            start: new Date(event.start).toISOString(),\n            end: new Date(event.end).toISOString()\n          },\n          room: event.room,\n          swap: []\n        })\n      });\n      return recommendation;\n    }\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./public/scripts/getRecomendation.js","function calendar(id, year, month) {\n  var Dlast = new Date(year, month + 1, 0).getDate(),\n    D = new Date(year, month, Dlast),\n    DNlast = new Date(D.getFullYear(), D.getMonth(), Dlast).getDay(),\n    DNfirst = new Date(D.getFullYear(), D.getMonth(), 1).getDay(),\n    calendar = '<tr>',\n    month = [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Май\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Октябрь\", \"Ноябрь\", \"Декабрь\"];\n  if (DNfirst !== 0) {\n    for (var i = 1; i < DNfirst; i++) calendar += '<td>';\n  } else {\n    for (var i = 0; i < 6; i++) calendar += '<td>';\n  }\n  for (var i = 1; i <= Dlast; i++) {\n    if (i === new Date().getDate() && D.getFullYear() === new Date().getFullYear() && D.getMonth() === new Date().getMonth()) {\n      calendar += '<td class=\"today\">' + i;\n    } else {\n      calendar += '<td>' + i;\n    }\n    if (new Date(D.getFullYear(), D.getMonth(), i).getDay() === 0) {\n      calendar += '<tr>';\n    }\n  }\n  for (var i = DNlast; i < 7; i++) calendar += '<td> ';\n  document.querySelector('#' + id + ' tbody').innerHTML = calendar;\n  document.querySelector('#' + id + ' thead td:nth-child(2)').innerHTML = month[D.getMonth()] + ' ' + D.getFullYear();\n  document.querySelector('#' + id + ' thead td:nth-child(2)').dataset.month = D.getMonth();\n  document.querySelector('#' + id + ' thead td:nth-child(2)').dataset.year = D.getFullYear();\n  if (document.querySelectorAll('#' + id + ' tbody tr').length < 6) {  // чтобы при перелистывании месяцев не \"подпрыгивала\" вся страница, добавляется ряд пустых клеток. Итог: всегда 6 строк для цифр\n    document.querySelector('#' + id + ' tbody').innerHTML += '<tr><td> <td> <td> <td> <td> <td> <td> ';\n  }\n}\n\nif ($('#calendar').length !== 0) {\n  calendar(\"calendar\", new Date().getFullYear(), new Date().getMonth());\n// переключатель минус месяц\n  document.querySelector('#table-arrow-left').onclick = function () {\n    calendar(\"calendar\", document.querySelector('#calendar thead td:nth-child(2)').dataset.year, parseFloat(document.querySelector('#calendar thead td:nth-child(2)').dataset.month) - 1);\n  };\n// переключатель плюс месяц\n  document.querySelector('#table-arrow-right').onclick = function () {\n    calendar(\"calendar\", document.querySelector('#calendar thead td:nth-child(2)').dataset.year, parseFloat(document.querySelector('#calendar thead td:nth-child(2)').dataset.month) + 1);\n  };\n}\n\n\n// WEBPACK FOOTER //\n// ./public/scripts/calendar.js","import { getRecommendation } from './getRecomendation';\n\n// index helpers scroll behavior\n// $('.time-piece.active').on('click', () => $('body').addClass('dimmed'));\nlet timeLines = $('.meeting-ui__time-line');\nlet lastScrollLeft = $('.meeting-ui').scrollLeft();\nlet calendarElem = $('.calendar');\n\n$('.month-UTC').each((i, elem) => $(elem).text(getLetterMonthRu($(elem).text())));\n$(window).scroll(\n  () => {\n    $('.time-piece.placed .meeting-info').addClass('hidden');\n    calendarElem.addClass('hidden');\n    calendarElem.css('transform', `translate(0, ${$(window).scrollTop()}px)`);\n    timeLines.css({\n      position: 'fixed',\n      transform: `translate(-${lastScrollLeft}px, 0)`\n      \n    });\n  }\n);\n\n$('.meeting-ui').scroll(\n  () => {\n    if (lastScrollLeft !== $('.meeting-ui').scrollLeft()) {\n      $('.time-piece.placed .meeting-info').addClass('hidden');\n      calendarElem.addClass('hidden');\n      timeLines.css({\n        position: 'absolute',\n        transform: `translate(0, ${$(window).scrollTop()}px)`\n      });\n      lastScrollLeft = $('.meeting-ui').scrollLeft();\n    }\n  }\n);\n\n// helpers for position information about Event\n$('.day-switcher__date').on('click', () => calendarElem.toggleClass('hidden'));\n$('.time-piece.placed').on('click', (event) => {\n  let target = $(event.target);\n  let width = window.innerWidth;\n  let offset = target.offset().left;\n  let widthElem = parseInt(target.css('width'), 10);\n  let meetingInfoWidth = parseInt(target.find('.meeting-info').css('width'), 10);\n  let needOffset;\n  let rightTrigger = ((offset + widthElem / 2) + meetingInfoWidth / 2);\n  let leftTrigger = ((offset + widthElem / 2) - meetingInfoWidth / 2);\n  let cornerOffset;\n  \n  target.find('.meeting-info').toggleClass('hidden');\n  if (!((rightTrigger < width) && (leftTrigger > 0))) {\n    if (rightTrigger < width) {\n      needOffset = leftTrigger - widthElem/2;\n      cornerOffset = offset + widthElem/2;\n      console.log('r<w', leftTrigger, offset)\n    }\n    if (leftTrigger > 0) {\n      needOffset = rightTrigger - width - widthElem/2;\n      cornerOffset = meetingInfoWidth - (width - offset) + widthElem/2;\n    }\n    \n    target.find('.meeting-info').css('left', `${-needOffset}px`);\n    target.find('.meeting-info__corner').css('left', `${cornerOffset}px`);\n    \n    if ((rightTrigger < width) && (leftTrigger > 0)) {\n      console.log('both')\n      $('.meeting-info').css('left', `${widthElem/2}px`);\n      $('.meeting-info__corner').css('left', `${meetingInfoWidth/2}px`);\n    }\n  } else {\n    console.log(\"true\")\n    $('.meeting-info').css('left', `${widthElem/2}px`);\n    $('.meeting-info__corner').css('left', `${meetingInfoWidth/2}px`);\n  }\n});\n\n// fix styles TODO:[A.Ivankov] вынести в стили\n// let reg = /Firefox/ig;\n// if (reg.test(window.navigator.userAgent)) {\n// \t$('.input-block__input_time').css('padding', '0')\n// }\n\n// fix for pages edit and add\n$('.input-block__input_members').focus(() => {\n  $('.member-list').fadeIn(500);\n});\n\n$('.input-block__input_members').focusout(() => {\n  $('.member-list').fadeOut(500);\n});\n\n// stiles for firefox browser\nlet regExp = /Firefox/ig;\nif (regExp.test(window.navigator.userAgent)) {\n  $('.input-block__input_time').css('padding', '0');\n  $('.input-block__icon_calendar').css('right', '40px');\n};\n\n// функция замены числового месяца на слово\nfunction getLetterMonthRu(month) {\n  return [\n    'января',\n    'февраля',\n    'марта',\n    'апреля',\n    'мая',\n    'июня',\n    'июля',\n    'августа',\n    'сентября',\n    'октября',\n    'ноября',\n    'декабря'\n  ][month]\n}\n// функция замены числового месяца на слово\nfunction getLetterMonthShortRu(month) {\n  return [\n    'янв',\n    'фев',\n    'мaр',\n    'апр',\n    'мая',\n    'июн',\n    'июл',\n    'авг',\n    'сен',\n    'окт',\n    'ноя',\n    'дек'\n  ][month]\n}\n\n// обработчики клика для добавления людей\n$('.member-list__element').on('click', (event) => {\n  let target = $(event.target);\n  // сврываем из списка эдемнтов\n  target.addClass('hidden');\n  let login = target.data('name');\n  $(`.add-member-list__element[data-name=${login}]`).removeClass('hidden')\n    .find('.member-list__checkbox')[0].checked = true;\n  // для того чтобы не сбрасывала выбранную комнату\n  if($('.offer-meeting-room__element.active').length === 0) {\n    validationDateAndSendQuery()\n  }\n});\n\n// обработчик удаления людей из списка\n$('.button-delete_add-member').on('click', (event) => {\n  let target = $(event.target);\n  let login = target.parents('.add-member-list__element').data('name');\n  $(`.member-list__element[data-name=${login}]`).removeClass('hidden');\n  target.parents('.add-member-list__element').addClass('hidden')\n    .find('.member-list__checkbox')[0].checked = false;\n  // для того чтобы не сбрасывала выбранную комнату\n  console.log($('.offer-meeting-room__element.active').length === 0);\n  if($('.offer-meeting-room__element.active').length === 0) {\n    validationDateAndSendQuery()\n  }\n});\n\n\n\n// Событие для элемента ввода\n$('#input-members').keyup(function() {\n  let filter = $(this).val();\n  let filterTarget = $('.member-list');\n  let hide = $(filterTarget).find('li:not(.hidden:Contains(\"' + filter + '\"))');\n  let show = $(filterTarget).find('li:Contains(\"' + filter + '\"):not(.hidden)')\n  hide.hide();\n  show.show();\n});\n\n// выражение для нечувствительной к регистру текста функции Contains()\njQuery.expr[':'].Contains = function(a,i,m) {\n  return jQuery(a).text().toLowerCase().indexOf(m[3].toLowerCase())>=0;\n};\n\n$(document).ready(() => {\n  // инициализация календаря для инпута с выборо даты\n  let blockInputData = $('.input-block__input_data');\n  if (blockInputData.length !== 0 ) {\n    blockInputData.addClass('datepicker-here');\n    blockInputData.datepicker();\n  \n    // предотвращение изменения даты в формате не подходящем нам\n    blockInputData.keydown(function(e){\n      e.preventDefault();\n    });\n    let inputDate = $('#input-date.needModifyData');\n    let dateInInput = Date.parse(inputDate.data('value'));\n    dateInInput = new Date(dateInInput);\n    let resultString = `${dateInInput.getUTCDate()} ${getLetterMonthRu(dateInInput.getUTCMonth())} ${dateInInput.getUTCFullYear()}`;\n    // настройки календаря\n    inputDate.val(resultString);\n    $('.timepicker').timepicker({\n      timeFormat: 'HH:mm',\n      interval: 15,\n      minTime: '8',\n      maxTime: '23',\n      defaultTime: '',\n      startTime: '',\n      dynamic: false,\n      dropdown: false,\n      scrollbar: false\n    });\n  }\n  let shortDateValue = $('.month-short-need-replace:first').text();\n  $('.month-short-need-replace').text(getLetterMonthShortRu(shortDateValue));\n  // validation date\n  $('#input-stop-time, #input-start-time').keyup(validationDateAndSendQuery);\n  $('#datepickers-container .datepicker').on('click', validationDateAndSendQuery);\n  $('.offer-meeting-room__element.active .button-delete').on('click', function (event) {\n    $(event.target).parents(\".offer-meeting-room__element .active\").remove();\n    validationDateAndSendQuery()\n  });\n});\n\nfunction validationDateAndSendQuery() {\n  let startTime = $('#input-start-time').val();\n  let stopTime = $('#input-stop-time').val();\n  let inputDate = $('#input-date');\n  // время находится в промежутке от 8 до 23\n  let startTimeValid = validationTimeRule(startTime);\n  let stopTimeValid = validationTimeRule(stopTime);\n  if (startTimeValid && stopTimeValid) {\n    // время старта больше времени конца и дата установлена\n    startTime = startTime.split(':');\n    stopTime = stopTime.split(':');\n    let starTimeCount = parseInt(startTime[0], 10)*60 + parseInt(startTime[1], 10);\n    let stopTimeCount = parseInt(stopTime[0], 10)*60 + parseInt(stopTime[1], 10);\n    if (starTimeCount < stopTimeCount && inputDate.val().length > 0) {\n      let timeStart = getCorrectTimeFormat(inputDate.val(), startTime).toISOString();\n      let timeEnd = getCorrectTimeFormat(inputDate.val(), stopTime).toISOString()\n      // находим участников\n      let members = [];\n      $('.member-list__checkbox').each((i, box) => {\n        if(box.checked) {\n          let login = $(box).parents('.add-member-list__element').data('name');\n          let memberListElement = $(`.member-list__element[data-name=${login}]`);\n          let avatar = memberListElement.find('.avatar-round').attr('src');\n          let floor = parseInt(memberListElement.find('.member__floor').text(), 10);\n          members.push({\n            login,\n            avatar,\n            floor\n          })\n        }\n      });\n      // задем дату\n      let date = {\n        start: timeStart,\n        end: timeEnd\n      };\n      let regExp = /edit-event/ig;\n      // запрос рекомендаций\n      query(members, date).then( data => {\n        $('#offer-rooms').html('');\n        console.log(data);\n        //добаление html на основе ответа\n        let rooms = data[1].data.rooms;\n        data[0].forEach(recommend => {\n          // для корректной работы замены\n          if (regExp.test(location.href)) {\n            recommend.swap = recommend.swap.filter(swap => String(swap.event) !== String($('#offer-rooms').data('eventid')));\n          }\n          if(recommend.swap.length === 0) {\n            recommend.swap.push({event: null, room: null});\n          }\n          recommend.date.start = new Date(Date.parse(recommend.date.start));\n          recommend.date.end = new Date(Date.parse(recommend.date.end));\n          let roomData = rooms.filter( room => String(room.id) === String(recommend.room));\n          let blockRecommendation = $('<li class=\"offer-meeting-room__element\"/>').append(\n            $('<div class=\"offer-meeting-room__time\">').html(`${(recommend.date.start.getUTCHours()<10?'0':'') + recommend.date.start.getUTCHours()}:${(recommend.date.start.getUTCMinutes()<10?'0':'') + recommend.date.start.getUTCMinutes()}—${(recommend.date.end.getUTCHours()<10?'0':'') + recommend.date.end.getUTCHours()}:${(recommend.date.end.getUTCMinutes()<10?'0':'') + recommend.date.end.getUTCMinutes()}`),\n            $('<div class=\"offer-meeting-room__room\">').html(`${roomData[0].title} • ${roomData[0].floor} этаж`),\n            $(`<input class=\"member-list__checkbox\" type=\"checkbox\" name=\"room\" value=\"${roomData[0].id}\"/>`),\n            $(`<input type=\"hidden\" name=\"swapEvent\" value=\"${recommend.swap[0].event}\">`),\n            $(`<input type=\"hidden\" name=\"swapRoom\" value=\"${recommend.swap[0].room}\">`),\n            $('<button class=\"button-delete\" type=\"button\">').append(\n                $('<img src=\"/dist/assets/close-white.svg\", alt=\"close\"/>')\n              )\n          );\n          $('#offer-rooms').append(blockRecommendation);\n          // обработчик для выбора переговорки\n          blockRecommendation.on('click', selectOffer)\n        })\n      });\n    }\n  }\n}\n\n// валидация времени\nfunction validationTimeRule(time) {\n  if (!Array.isArray(time)){\n    time = time.split(':');\n  }\n  if (parseInt(time[0], 10) >= 8 && parseInt(time[0], 10) <= 23) {\n    if (parseInt(time[0], 10) === 23 && parseInt(time[1], 10) > 0) {\n      return false;\n    }\n    return true\n  }\n  return false\n}\n\n// отработвка выбора переговорки\nfunction selectOffer(event) {\n  event.stopPropagation();\n  let targetElement = $(event.target);\n  targetElement.addClass('active');\n  targetElement.find('.member-list__checkbox')[0].checked = true;\n  targetElement.parent().find('.offer-meeting-room__element:not(.active)').remove();\n  $('.offer-meeting-room__element.active .button-delete').on('click', function (event) {\n    event.stopPropagation();\n    $(event.target).parents(\".offer-meeting-room__element.active\").remove();\n    validationDateAndSendQuery()\n  });\n}\n\n// запрос рекоменованных переговорок\nasync function query(members, date) {\n  let db = {};\n  const queryUsers = `{\n    users{\n      id\n      login\n      homeFloor\n      avatarUrl\n    }\n  }`;\n  const queryRooms = '{\\n' +\n    '  rooms {\\n' +\n    '    id\\n' +\n    '    title\\n' +\n    '    capacity\\n' +\n    '    floor\\n' +\n    '  }\\n' +\n    '}';\n  const queryEvents = '{\\n' +\n    '  events {\\n' +\n    '    id\\n' +\n    '    title\\n' +\n    '    dateStart\\n' +\n    '    dateEnd\\n' +\n    '    users {\\n' +\n    '      id\\n' +\n    '      login\\n' +\n    '      homeFloor\\n' +\n    '      avatarUrl\\n' +\n    '    }\\n' +\n    '    room {\\n' +\n    '      id\\n' +\n    '      title\\n' +\n    '      capacity\\n' +\n    '      floor\\n' +\n    '    }\\n' +\n    '  }\\n' +\n    '}';\n  let users = await request({query: queryUsers });\n  let rooms = await request({query: queryRooms });\n  let events = await request({query: queryEvents });\n  // console.log(users, events, rooms);\n  db.persons = [];\n  users.data.users.forEach(user => {\n    db.persons.push({\n      login: user.login,\n      floor: user.homeFloor,\n      avatar: user.avatarUrl\n    });\n  });\n  db.rooms = rooms.data.rooms;\n  db.events = [];\n  events.data.events.forEach((event) => {\n    event.users.forEach( (user, i) => {\n      event.users[i] = user.login;\n    });\n    event.room = parseInt(event.room.id);\n    db.events.push({\n      id: event.id,\n      title: event.title,\n      date: {\n        start: event.dateStart,\n        end: event.dateEnd\n      },\n      members: event.users,\n      room: event.room\n    });\n  });\n  return [getRecommendation(date, members, db), rooms]\n}\n\n\n// xhr graphql\nfunction request(query) {\n  return new Promise(function(resolve, reject) {\n    const xhr = new XMLHttpRequest();\n    xhr.responseType = 'json';\n    xhr.onreadystatechange = function(e) {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          resolve(xhr.response)\n        } else {\n          reject(xhr.status)\n        }\n      }\n    };\n    xhr.ontimeout = function () {\n      reject('timeout')\n    };\n    xhr.open(\"POST\", \"/graphql\");\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    xhr.setRequestHeader(\"Accept\", \"application/json\");\n    xhr.send(JSON.stringify(query));\n  })\n}\n\n// получение корректоного формата даты и времени\nfunction getCorrectTimeFormat(date, time) {\n  if (!Array.isArray(time)){\n    time = time.split(':');\n  }\n  let dateParts = date.split(' ');\n  let timeParts = time;\n  let numberMonth = [\n    'января',\n    'февраля',\n    'марта',\n    'апреля',\n    'мая',\n    'июня',\n    'июля',\n    'августа',\n    'сентября',\n    'октября',\n    'ноября',\n    'декабря'\n  ].indexOf(dateParts[1].toLowerCase());\n  return new Date(Date.UTC(\n    dateParts[2],\n    numberMonth,\n    dateParts[0],\n    timeParts[0],\n    timeParts[1]\n  ));\n}\n//TODO:[A.Ivankov] валидация времени\n// TODO:[A.Ivankov] сделать выбор с помощью стрелок и enter\n\n\n// WEBPACK FOOTER //\n// ./public/scripts/helpers.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/scss/main.scss\n// module id = 3\n// module chunks = 0","import '../scss/main.scss';\nimport './getRecomendation'\nimport './helpers.js';\nimport './calendar.js';\n\n\n\n// WEBPACK FOOTER //\n// ./public/scripts/app.js"],"sourceRoot":""}